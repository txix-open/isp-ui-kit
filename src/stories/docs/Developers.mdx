import { Meta } from '@storybook/addon-docs/blocks';

<Meta title="Разработчикам" />

# Для разработчиков
Раздел, предназначенный для описания процессов взаимодействия с кодовой базой проекта.

## Меню
- [Технологии](#технологии)
- [Структура проекта](#структура-проекта)
- [Правила написания компонентов](#правила-написания-компонентов)
    - [Название файлов](#название-файлов)
    - [Стилизация](#стилизация)
    - [Типизация](#типизация)
    - [Структура компонента](#структура-компонента)
- [Импорт компонентов](#импорт-компонентов)
    - [Импорт базовых компонентов](#импорт-базовых-компонентов)
    - [Импорт компонентов группы](#импорт-компонентов-группы)
- [Обновление версии проекта](#обновление-версии-проекта)

## Технологии
Для написания кода используется связка **React + TypeScript + SCSS**.

- **Сборка библиотеки**: Rollup
- **Документация**: Storybook

## Структура проекта
Весь код расположен в папке `src`.

- Компоненты, относящиеся к группам, располагаются в соответствующих папках. Например:
- `FormInput` → `FormComponents`
- `Column` → `Layout`
- Компоненты общего назначения расположены в корне `/src`.

## Правила написания компонентов

### Название файлов
- Основной файл: `ComponentName.tsx`
- Файл типов: `component-name.type.ts`
- Файл стилей: `component-name.scss`

### Стилизация
Используется **БЭМ-нейминг** для CSS-классов.

Стили должны быть изолированы внутри компонента:

```scss
.user-profile {
    &__header {
        &--collapsed {
            height: 40px;
        }
    }
}
```

### Типизация
- Типы в отдельные файлы
- interface для публичного API
- type для сложных типов и объединений
- `Type` в конце названия типов
```ts
export interface UserProfilePropsType {
user: User;
onEdit?: (user: User) => void;
}

type UserProfileActions = 'edit' | 'delete' | 'view';
```

### Структура компонента
#### От общего к частному
Сначала объявляются хуки, влияющие на общее поведение компонента (состояния, контексты), затем более специфичная логика.

#### Группировка по функционалу
Объединение связанных элементов (состояние + эффекты, работающие с ним).

#### Жизненный цикл компонента
Порядок кода должен соответствовать последовательности выполнения:
1. Инициализация состояния
2. Подписки
3. Эффекты
4. Рендер

### Импорт компонентов

#### Импорт базовых компонентов
1. Компонент должен иметь `export default` внутри файла компонента.
2. Подключить импорт компонента в `src/index.ts`:
```tsx
import SearchInput from './SearchInput/SearchInput';
   ```

#### Импорт компонентов группы
1. Компонент должен иметь `export default` внутри файла компонента.
2. Подключить импорт компонента в `index.ts` группы, например: `src/FormComponents/index.ts`:
```tsx
export { default as FormInput } from './FormInput/FormInput';
   ```
3. Если группа не была создана ранее, подключить импорт группы в `src/index.ts`:
```tsx
import * as FormComponents from './FormComponents';
   ```
### Обновление версии проекта

Коммит с обновлением версии должен быть **последним** в задаче и иметь коммит-месседж:
```sh
up version to X.Y.Z
```

#### Шаги обновления:
1. **Повысить версию** в `package.json` (использовать [семантическое версионирование](https://semver.org/)).
2. **Описать изменения** в `CHANGELOG.md`.
3. **Запушить изменения** в репозиторий с коммит-месседжем:
```sh
git commit -m "up version to X.Y.Z"
git push
   ```
4. **Дождаться обновления версии в npm** (~7 минут).
