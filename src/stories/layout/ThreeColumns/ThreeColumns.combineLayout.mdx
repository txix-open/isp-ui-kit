import {Meta, Canvas} from '@storybook/addon-docs/blocks';
import * as LayoutStories from '../Layout.stories';

<Meta title="Layout/ThreeColumns/–ö–û–î - –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä"/>

## üîó –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–∏–º–µ—Ä

–ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥—ë–Ω –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã `LayoutMenu` –≤–º–µ—Å—Ç–µ —Å `react-router-dom`.

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:
- –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `useNavigate()` –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–æ–≤;
- —á–∏—Ç–∞–µ—Ç `location.pathname` –¥–ª—è –ø–æ–¥—Å–≤–µ—Ç–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø—É–Ω–∫—Ç–∞;
- —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–µ–∞–ª—å–Ω–æ–µ –ª–µ–≤–æ–µ –º–µ–Ω—é –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.

<Canvas of={LayoutStories.CombinedLayout}/>

```tsx
import { BrowserRouter, Routes, Route, useLocation, useNavigate } from 'react-router-dom';
import { useState, useMemo } from 'react';
import { List, Tooltip } from 'antd';
import { Column, NoData, EmptyData } from '../../Layout';
import { LayoutMenu } from 'isp-ui-kit';
import '../styleConst.css';

// --------------------------------------------
// –ú–µ–Ω—é
// --------------------------------------------
const menuConfig = [
  { key: 'dashboard', label: '–î–∞—à–±–æ—Ä–¥', permissions: [] },
  { key: 'users', label: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏', permissions: [] },
  {
    key: 'settings',
    label: '–ù–∞—Å—Ç—Ä–æ–π–∫–∏',
    permissions: [],
    children: [
      { key: 'profile', label: '–ü—Ä–æ—Ñ–∏–ª—å', permissions: [] },
      { key: 'security', label: '–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å', permissions: [] },
    ],
  },
];

const AppMenu = () => {
  const location = useLocation();
  const navigate = useNavigate();

  const currentPath = useMemo(
    () => location.pathname.replace(/^\/+/, ''),
    [location.pathname]
  );

  return (
    <LayoutMenu
      currentPath={currentPath}
      menuConfig={menuConfig}
      onHideMenuItem={() => false}
      onClickItem={(info) => navigate(`/${info.key}`)}
    />
  );
};

// --------------------------------------------
// –§—É–Ω–∫—Ü–∏—è —Ä–µ–Ω–¥–µ—Ä–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∫–æ–ª–æ–Ω–æ–∫
// --------------------------------------------
const renderColumnItems = (item: any) => (
  <List.Item>
    <Tooltip mouseEnterDelay={1} title={item.name}>
      <List.Item.Meta title={item.name} description={item.name} />
    </Tooltip>
  </List.Item>
);

// --------------------------------------------
// –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏
// --------------------------------------------
const ColumnsPage = () => {
  const [selected, setSelected] = useState<string>();
  const [search, setSearch] = useState('');

  const items = [
    { id: '1', name: '–≠–ª–µ–º–µ–Ω—Ç 1' },
    { id: '2', name: '–≠–ª–µ–º–µ–Ω—Ç 2' },
  ];

  const isEmpty = items.length === 0;

  return (
    <div style={{ display: 'flex', gap: 24 }}>
      <Column
        title="–ö–æ–ª–æ–Ω–∫–∞ 1"
        showAddBtn
        showUpdateBtn
        showRemoveBtn
        items={items}
        selectedItemId={selected}
        setSelectedItemId={setSelected}
        searchValue={search}
        onChangeSearchValue={setSearch}
        renderItems={renderColumnItems}
      />

      <div style={{ minWidth: 240 }}>
        {isEmpty ? <NoData /> : <NoData title="–ü—Ä–∏–º–µ—Ä –ø—É—Å—Ç–æ–≥–æ –±–ª–æ–∫–∞" />}
      </div>

      <div style={{ minWidth: 240 }}>
        <EmptyData />
      </div>
    </div>
  );
};

// --------------------------------------------
// –°—Ç—Ä–∞–Ω–∏—Ü—ã –¥–ª—è —Ä–æ—É—Ç–æ–≤
// --------------------------------------------
const Dashboard = () => <h2>–î–∞—à–±–æ—Ä–¥</h2>;
const Users = () => <h2>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h2>;
const Profile = () => <h2>–ü—Ä–æ—Ñ–∏–ª—å</h2>;
const Security = () => <h2>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</h2>;

// --------------------------------------------
// –û—Å–Ω–æ–≤–Ω–æ–π App
// --------------------------------------------
export const RouterWithColumnsExample = () => (
  <BrowserRouter>
    <div style={{ display: 'flex', height: '100vh' }}>
      {/* –ú–µ–Ω—é —Å–ª–µ–≤–∞ */}
      <div style={{ width: 260, borderRight: '1px solid #eee' }}>
        <AppMenu />
      </div>

      {/* –ö–æ–Ω—Ç–µ–Ω—Ç —Å–ø—Ä–∞–≤–∞ */}
      <div style={{ padding: 24, flex: 1, overflowY: 'auto' }}>
        <Routes>
          <Route path="/" element={<Dashboard />} />
          <Route path="/dashboard" element={<Dashboard />} />
          <Route path="/users" element={<Users />} />
          <Route path="/profile" element={<Profile />} />
          <Route path="/security" element={<Security />} />
          <Route path="/columns" element={<ColumnsPage />} />
        </Routes>
      </div>
    </div>
  </BrowserRouter>
);
```
